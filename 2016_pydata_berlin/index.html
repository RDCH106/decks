<!DOCTYPE html>
<html>
  <head>
    <title>Title</title>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="slides.css">
  </head>
  <body>
    <textarea id="source">

class: center, middle

# Predictive modeling with Python
## trends and tools

Olivier Grisel - PyData Berlin 2016

.affiliations[
  ![Inria](images/inria-logo.png)
  ![scikit-learn](images/scikit-learn-logo.png)
]

---
class: singleimg
# Big RAM is eating big data


![Inria](images/cumfq-kdnuggets.png)

.credits[
  Source: http://datascience.la/big-ram-is-eating-big-data-size-of-datasets-used-for-analytics/
  by Szilard Pafka
]

---
class: singleimg
# Big RAM is eating big data


![Inria](images/cumfq-kdnuggets-linear.png)

.credits[
  Source: http://datascience.la/big-ram-is-eating-big-data-size-of-datasets-used-for-analytics/
  by Szilard Pafka
]

---
# Big RAM is eating big data

.middlebelowheader[

### Datasets size increase by **20%** y/y

### Big EC2 instance RAM size increase by **50%** y/y

Year	| Type	       | RAM (GiB)
------|--------------|---------
2007  | m1.xlarge    | 15
2009  | m2.4xlarge   | 68
2012  | hs1.8xlarge  | 117
2014  | r3.8xlarge   | 244
2016  | x1.32xlarge  | 1952

### ⇒ single node in-memory analytics forever!?

]

---
class: middle, center, singleimg

![Consulting service: you bring your big data problems to me, I say
  "your data set fits in RAM", you pay me $10,000 for saving you $500,000.
](images/your-data-set-fits-in-RAM.png)

---
# But...

.middlebelowheader[

### What if we have a sample bias in the KDnuggets survey?

### Maybe favorite tools prevent the KDnuggets readers to work with larger datasets:

- Setting up a "Big Data" cluster requires sysadmin skills
- Hosting or renting a "Big Data" cluster is too expensive
- Cluster-induced latency makes analysis much less fun / productive

]

---
# Agenda

.middlebelowheader[

### Evolution on predictive modeling tools

### Scaling out analysis with dask/distributed

### Scaling out feature engineering with MPP

]

---
class: center, middle, bgheader
background-color: rgb(30, 0, 100)

# Evolution of predictive modeling tools

---
background-image: url(images/01-predictive-modeling-flow.png)
background-size: contain

---
background-image: url(images/02-predictive-modeling-flow.png)
background-size: contain

---
background-image: url(images/03-small-data-xl.png)
background-size: contain

---
background-image: url(images/04-small-medium-python.png)
background-size: contain

---
background-image: url(images/05-small-medium-python-pandas.png)
background-size: contain

---
background-image: url(images/06-small-medium-pandas-sklearn.png)
background-size: contain

---
background-image: url(images/07-big-hive.png)
background-size: contain

---
background-image: url(images/08-big-hive-python.png)
background-size: contain

---
background-image: url(images/09-big-redshift-python.png)
background-size: contain

---
background-image: url(images/10-big-spark-spark.png)
background-size: contain

---
class: center, middle, bgheader
background-color: rgb(30, 100, 0)

# Where do predictive models fit?

---
background-image: url(images/11-big-data-archictecture.png)
background-size: contain

---
background-image: url(images/12-big-data-tools-mix-1.png)
background-size: contain

---
background-image: url(images/13-big-data-tools-mix-2.png)
background-size: contain

---
class: center, middle, bgheader
background-image: url(images/racks-8533890844_02fa24474d_o.jpg)
background-size: cover

# Scaling predictive modeling

---
# The need for scaling out in ML

.middlebelowheader[

### I/O intensive feature engineering and model scoring

#### Loading, filtering, joining, aggregating: SQL-land

#### Click log ⇒ Session features ⇒ User activity features

### CPU intensive model fitting

#### Hyper-parameter search and cross-validation

#### Gradient Boosting, Random Forests, Large Neural Networks

]

---
# Limitations of PySpark

.middlebelowheader[

### Python driver -> Scala / JVM -> Python worker

#### Latency induced by the networked architecture

#### Complex traceback / errors for non-scala developers

### No pure Python local mode for PySpark

#### Impossible to use profiler or ipdb for inner calls

]

---
# Dask + Distributed

.middlebelowheader[

### Collections oriented API:

- `dask.bag`
- `dask.array`
- `dask.dataframe`

### `dask.delayed`: procedural definition of the compute graph

### `distributed` provides cluster scheduler (optional)

]

---
class: center, middle, bgheader
background-image: url(images/floor-2249694239_c27a3ea043_o.jpg)
background-size: cover

# Scaling feature engineering with MPP

---
class: bunchoflogos
# Massively Parallel Processing

.middlebelowheader[

![AWS Redshift](images/redshift-logo.png)
![Google BigQuery](images/bigquery-logo.png)

![Apache Impala](images/impala-logo.png)
![Citus](images/citusdata-logo.png)
![Presto](images/prestodb-logo.png)

]

---
class: center, middle, bgheader
background-color: rgb(30, 100, 0)

# Conclusion

---
class: middle, center, singleimg

![Changing stuff and see what happens](images/changing-stuff-models.png)

---
# Secrets of the success of Python (&amp; R) in Data Science

.middlebelowheader[

### Iterative exploration with built-in plotting tools

### Low latency of single host in-memory computing

### Easy to install, easy to teach: no-sysadmin required

### Rich ecosystem of libraries

]

---
# Conclusion

.middlebelowheader[

### PyData ecosystem is evolving towards big data / big compute

### PyData has a lot to gain from scaling

### But it should never sacrifice usability on single host

### dask, tensorflow and ibis / blaze show that it's possible

]

---
# Thank you

.middlebelowheader[
<div style="display: flex">

<div style="width: 50%; padding: 1em">
<p><img height="35px" src="images/carina-logo.svg" /></p>
<p>
<strong>Rackspace</strong> for free cloud resources to support SciPy
projects and for helping the Python community in general.
</p>
</div>

<div style="width: 50%; padding: 1em">
<p><img height="35px" src="images/gcp-logo.png" /></p>
<p>
<strong>Google</strong> for GCP credits to test distributed Python with
kubernetes.
</p>
</div>

</div>

<div style="margin: 1em auto; width: 400px">
<p><img height="50px" src="images/inria-logo.png" /></p>
<p>
<strong>Inria</strong> for supporting my work on scikit-learn and related
projects.
</p>
</div>
]

---
class: middle

# Thank you for your attention!

- https://github.com/dask

- https://github.com/ogrisel/docker-distributed

- [dask/distributed YouTube channel](
    https://www.youtube.com/playlist?list=PLRtz5iA93T4PQvWuoMnIyEIz1fXiJ5Pri)

---
class: middle

.big[
```python
def some_function(a, b):
    """This is a function"""
    c = a + b
    d = a * b
    return d if c > 0 else -d

```
]

---
Background image credits

- https://www.flickr.com/photos/jemimus/8533890844/

- https://www.flickr.com/photos/antcaz/2249694239/

    </textarea>
    <script src="../remark.min.js" type="text/javascript">
    </script>
    <script type="text/javascript">
      var slideshow = remark.create({
        highlightStyle: 'github'
      });
    </script>
  </body>
</html>
